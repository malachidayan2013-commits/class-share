<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/static/style.css">
<script src="/static/script.js"></script>
</head>
<body>

<div class="sidebar">
    <a href="/dashboard?path=root">ğŸ“ ×§×‘×¦×™× ×–××™× ×™×</a>

    {% if role == "teacher" %}
    <a href="/trash">ğŸ—‘ ××©×¤×”</a>
    <a href="/change_password">ğŸ” ×©×™× ×•×™ ×¡×™×¡××”</a>
    {% endif %}

    <a href="/logout">ğŸšª ×™×¦×™××”</a>
</div>

<div class="content">

<h3>
{% if path == "root" %}
×§×‘×¦×™× ×–××™× ×™×
{% else %}
{{ path }}
{% endif %}
</h3>

{% if path != "root" %}
<a href="/dashboard?path={{ '/'.join(path.split('/')[:-1]) }}">â¬… ×—×–×•×¨</a>
{% endif %}

{% if role == "teacher" %}

<button onclick="toggleNew()">â• ×—×“×©</button>

<div id="newBox" style="display:none; margin-top:10px;">

<form method="post" action="/create" enctype="multipart/form-data">
<input type="hidden" name="path" value="{{ path }}">

<select name="type" onchange="showFields(this.value)">
<option value="">×‘×—×¨ ×¡×•×’</option>
<option value="folder">×ª×™×§×™×™×”</option>
<option value="file">×§×•×‘×¥</option>
<option value="link">×§×™×©×•×¨</option>
</select>

<div id="nameField" style="display:none;">
<input type="text" name="name" placeholder="×©×">
</div>

<div id="fileField" style="display:none;">
<input type="file" name="file">
</div>

<div id="urlField" style="display:none;">
<input type="text" name="url" placeholder="URL">
</div>

<button type="submit">×¦×•×¨</button>
</form>

</div>

{% endif %}

<hr>

<ul>
{% for name, item in folder.children.items() %}
<li>

{% if item.type == "folder" %}
ğŸ“ <a href="/dashboard?path={{ path }}/{{ name }}">{{ name }}</a>

{% elif item.type == "file" %}
ğŸ“„ {{ name }} 
<a href="/download/{{ name }}">â¬‡</a>

{% elif item.type == "link" %}
ğŸ”— <a href="{{ item.url }}" target="_blank">{{ name }}</a>

{% endif %}

{% if role == "teacher" %}
<a href="/delete?path={{ path }}&name={{ name }}">ğŸ—‘</a>
{% endif %}

{% if role == "teacher" %}
<a href="/edit?path={{ path }}&name={{ name }}">âœ ×¢×¨×™×›×”</a>
{% endif %}

</li>
{% endfor %}
</ul>

</div>
</body>
</html>
