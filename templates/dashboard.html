<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/static/style.css">
<script src="/static/script.js"></script>
</head>
<body>

<div class="sidebar">
    <a href="/dashboard?path=root">ğŸ“ ×”×§×‘×¦×™× ×©×œ×™</a>
    <a href="/dashboard?view=trash">ğŸ—‘ ××©×¤×”</a>
    <a href="/logout">ğŸšª ×™×¦×™××”</a>
</div>

<div class="content">

{% if view == "files" %}

<h3>{{ path }}</h3>

{% if path != "root" %}
<a href="/dashboard?path={{ '/'.join(path.split('/')[:-1]) }}">â¬… ×—×–×•×¨</a>
{% endif %}

{% if role == "teacher" %}
<button onclick="toggleNew()">â• ×—×“×©</button>

<div id="newBox" style="display:none;">
<form method="post" action="/create" enctype="multipart/form-data">
<input type="hidden" name="path" value="{{ path }}">

<select name="type" onchange="showFields(this.value)">
<option value="">×‘×—×¨ ×¡×•×’</option>
<option value="folder">×ª×™×§×™×™×”</option>
<option value="file">×§×•×‘×¥</option>
<option value="link">×§×™×©×•×¨</option>
</select>

<div id="nameField" style="display:none;">
<input type="text" name="name" placeholder="×©×">
</div>

<div id="fileField" style="display:none;">
<input type="file" name="file">
</div>

<div id="urlField" style="display:none;">
<input type="text" name="url" placeholder="URL">
</div>

<button type="submit">×¦×•×¨</button>
</form>
</div>
{% endif %}

<hr>

<ul>
{% for name, item in folder.children.items() %}
<li>

{% if item.type == "folder" %}
ğŸ“ <a href="/dashboard?path={{ path }}/{{ name }}">{{ name }}</a>
{% elif item.type == "file" %}
ğŸ“„ {{ name }} <a href="/download/{{ name }}">â¬‡</a>
{% elif item.type == "link" %}
ğŸ”— <a href="{{ item.url }}" target="_blank">{{ name }}</a>
{% endif %}

{% if role == "teacher" %}
<form method="post" action="/delete" style="display:inline;">
<input type="hidden" name="path" value="{{ path }}">
<input type="hidden" name="name" value="{{ name }}">
<button>ğŸ—‘</button>
</form>
{% endif %}

</li>
{% endfor %}
</ul>

{% elif view == "trash" %}

<h3>××©×¤×”</h3>

<ul>
{% for name, item in trash.items() %}
<li>
{{ name }}

<form method="post" action="/restore" style="display:inline;">
<input type="hidden" name="name" value="{{ name }}">
<button>â™» ×©×—×–×¨</button>
</form>

<form method="post" action="/delete_forever" style="display:inline;">
<input type="hidden" name="name" value="{{ name }}">
<button>âŒ ××—×§ ×¡×•×¤×™×ª</button>
</form>

</li>
{% endfor %}
</ul>

{% endif %}

</div>
</body>
</html>
