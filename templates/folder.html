<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h2>{{ folder_name }}</h2>
<a href="/">â¬… ×—×–×¨×”</a>

<table>
<tr>
    <th>×©×</th>
    <th>×¤×¢×•×œ×”</th>
</tr>

{% for i in items %}
<tr>
<td>
{% if i.type == "folder" %}
    ğŸ“ <a href="/folder/{{ i.id }}">{{ i.name }}</a>
{% elif i.type == "file" %}
    ğŸ“„ {{ i.name }}
{% elif i.type == "link" %}
    ğŸ”— {{ i.name }}
{% endif %}
</td>

<td>
{% if i.type == "file" %}
    <a href="/download/{{ i.name }}">×”×•×¨×“×”</a>
{% elif i.type == "link" %}
    <a href="{{ i.url }}" target="_blank">×¤×ª×™×—×”</a>
{% endif %}

{% if admin %}
    <button onclick="openRename({{ i.id }})">âœï¸</button>

    <form id="rename-{{ i.id }}" method="post" action="/rename/{{ i.id }}" style="display:none">
        <input name="name" value="{{ i.name }}" required>
        <button>ğŸ’¾</button>
        <button type="button" onclick="closeRename({{ i.id }})">âŒ</button>
    </form>

    <a href="/delete/{{ i.id }}" onclick="return confirm('×œ××—×•×§?')">ğŸ—‘ï¸</a>
{% endif %}
</td>
</tr>
{% endfor %}
</table>

{% if admin %}
<button onclick="openNew()">×—×“×©</button>

<form id="newForm" method="post" action="/new" enctype="multipart/form-data" style="display:none">
    <input type="hidden" name="parent" value="{{ folder_id }}">

    <select name="type" onchange="toggle(this.value)">
        <option value="folder">×ª×™×§×™×™×”</option>
        <option value="file">×§×•×‘×¥</option>
        <option value="link">×§×™×©×•×¨</option>
    </select>

    <input name="name" placeholder="×©×">
    <input name="url" id="url" placeholder="×§×™×©×•×¨" style="display:none">
    <input type="file" name="file" id="file" style="display:none">

    <button>×©××•×¨</button>
</form>
{% endif %}

<script>
function openNew() {
    document.getElementById("newForm").style.display = "block";
}

function toggle(v) {
    document.getElementById("url").style.display = v === "link" ? "block" : "none";
    document.getElementById("file").style.display = v === "file" ? "block" : "none";
}

function openRename(id) {
    document.getElementById("rename-" + id).style.display = "inline";
}

function closeRename(id) {
    document.getElementById("rename-" + id).style.display = "none";
}
</script>

</body>
</html>
